<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Inicio</title>
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Estilos personalizados -->
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f8f9fa;
            margin: 0;
        }

        .hero {
            padding: 4rem 2rem;
            background: #ffffff;
            text-align: center;
        }

        .hero h1 {
            font-size: 2.5rem;
            font-weight: bold;
        }

        .btn-purple {
            background-color: #7b61ff;
            color: white;
            border-radius: 10px;
            padding: 0.75rem 1.5rem;
            font-weight: 500;
        }

        .section {
            padding: 3rem 2rem;
            text-align: center;
        }

        .card-custom {
            border: none;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
            border-radius: 1rem;
            transition: transform 0.3s ease;
        }

        .card-custom:hover {
            transform: translateY(-5px);
        }

        .highlight {
            background-color: #7b61ff;
            color: white;
            border-radius: 1rem;
            padding: 2rem;
        }

        .highlight .btn {
            background-color: white;
            color: #7b61ff;
            font-weight: bold;
            margin-top: 1rem;
        }
    </style>
</head>

<body>
    {% if user_name %}
    <section class="container text-center py-5">
        <h1>Hola, {{ user_name }}</h1>

        <a href="{% url 'listar_tableros' %}" class="btn btn-purple mt-3">Mis Tableros</a>

        {% if rol == 'administrador' %}
        <a href="{% url 'metricas_usuarios' %}" class="btn btn-purple mt-3">Usuarios</a>
        <a href="{% url 'dashboard' %}" class="btn btn-purple mt-3">Administración</a>
        {% elif rol == 'visualizador' %}
        <a href="{% url 'metricas_usuarios' %}" class="btn btn-purple mt-3">Usuarios</a>
        {% endif %}

        <a href="{% url 'eliminar_cuenta' %}" class="btn btn-purple mt-3">Cuenta</a>
        <a href="{% url 'logout' %}" class="btn btn-purple mt-3">Cerrar Sesión</a>

        <script>
            {% if request.session.firebase_id_token %}
            localStorage.setItem('firebase_id_token', '{{ request.session.firebase_id_token|escapejs }}');
            {% endif %}
        </script>
    </section>
    {% else %}
    <!-- Si no hay usuario logueado, mostramos contenido de marketing -->

    <!-- Barra superior -->
    <nav class="d-flex justify-content-between align-items-center px-4 py-3 border-bottom">
        <div class="fw-bold fs-4 text-purple">🌸 TaskManagerPro</div>
        <a href="{% url 'login' %}" class="btn btn-purple">Iniciar Sesión</a>
    </nav>

    <!-- Hero -->
    <section class="hero">
        <div class="container">
            <h1>Organiza tu tiempo. Logra tus metas.</h1>
            <p class="lead mt-3">Planifica, prioriza y colabora con tu equipo desde cualquier lugar.</p>
            <p class="lead mt-3">TaskManagerPro te ofrece todas las herramientas necesarias para una vida productiva.</p>
            <a href="{% url 'registro' %}" class="btn btn-purple mt-4">Comienza Gratis</a>
        </div>
    </section>

    <!-- Botón para descargar PDF -->
    <div class="text-center my-4">
        <button onclick="descargarPDF()" class="btn btn-purple">Descargar esta página en PDF</button>
    </div>

    <!-- ¿Quiénes somos? -->
    <section class="section">
        <div class="container">
            <h2>¿Quiénes somos?</h2>
            <p class="mt-3">TaskManagerPro simplifica la gestión de tareas para estudiantes, trabajadores y equipos de empresas. Mantén el control de tus pendientes, cumple plazos y colabora eficientemente.</p>
        </div>
    </section>

    <!-- Características -->
    <section class="section">
        <div class="container">
            <h3 class="mb-4">🚀 Características de TaskManagerPro</h3>
            <div class="row g-4">
                <div class="col-md-4">
                    <div class="card card-custom p-4">
                        <h5>📅 Planificación Eficiente</h5>
                        <p>Programa tus tareas y recibe recordatorios automáticos.</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card card-custom p-4">
                        <h5>🤝 Trabajo Colaborativo</h5>
                        <p>Comparte tareas, añade subtareas y coordina con tu equipo en tiempo real.</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card card-custom p-4">
                        <h5>📆 Vista de Calendario</h5>
                        <p>Visualiza tus tareas distribuidas semanal o mensualmente con una interfaz clara.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Llamado a la acción -->
    <section class="highlight text-center mt-5">
        <h4>¡Impulsa tu productividad hoy!</h4>
        <p>Únete gratis y transforma la manera en que gestionas tu tiempo.</p>
        <a href="{% url 'registro' %}" class="btn">Empieza Ahora</a>
    </section>
    {% endif %}

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <script>
        function descargarPDF() {
            const elemento = document.body; // Puedes cambiar esto por un contenedor específico si quieres solo una parte
            const opciones = {
                margin: 0.5,
                filename: 'pagina_taskmanagerpro.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2 },
                jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
            };
            html2pdf().set(opciones).from(elemento).save();
        }
    </script>
</body>
</html>
