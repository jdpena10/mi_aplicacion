<!-- Paso 1: BotÃ³n inicial -->
<button type="button" class="btn btn-danger" onclick="mostrarConfirmacion()">ğŸ—‘ï¸ Eliminar mi cuenta</button><br><br>

<!-- Paso 2: Formulario oculto inicialmente -->
<form id="form-eliminar" method="POST" action="{% url 'eliminar_cuenta' %}" style="display:none;" onsubmit="return confirmacionFinal();">
    {% csrf_token %}

    <label for="razon">Â¿Por quÃ© deseas eliminar tu cuenta?</label>
    <select id="razon" name="razon" class="form-select mb-3" required>
        <option value="">-- Selecciona una razÃ³n --</option>
        <option value="No la uso con frecuencia">No la uso con frecuencia</option>
        <option value="No estoy satisfecho con el servicio">No estoy satisfecho con el servicio</option>
        <option value="Tengo una cuenta duplicada">Tengo una cuenta duplicada</option>
        <option value="Problemas de privacidad">Problemas de privacidad</option>
        <option value="Otra">Otra</option>
    </select>

    <button type="submit" class="btn btn-danger">âœ… Confirmar eliminaciÃ³n definitiva</button>
</form>

<!-- BotÃ³n para volver a la pÃ¡gina anterior -->
<button type="button" class="btn btn-secondary mt-3" onclick="history.back()">â† Volver</button>

<script>
function mostrarConfirmacion() {
    // Mostrar el formulario con la razÃ³n
    document.getElementById('form-eliminar').style.display = 'block';

    // Opcional: Deshabilitar el botÃ³n inicial para no repetir el proceso
    event.target.disabled = true;
}

function confirmacionFinal() {
    const razon = document.getElementById("razon").value;

    if (!razon) {
        alert("Por favor selecciona una razÃ³n para eliminar tu cuenta.");
        return false;
    }

    if (!confirm("Â¿EstÃ¡s seguro de que deseas eliminar tu cuenta y todos tus datos? Esta acciÃ³n no se puede deshacer.")) {
        return false;
    }

    return confirm("Esta es tu Ãºltima oportunidad. Â¿Realmente quieres eliminar tu cuenta?");
}
</script>
